const RightMenuAplayer=(()=>{let e;const a={},r={checkAPlayer:()=>{void 0===e||void 0===a.player?r.setAPlayerObject():void 0===a.observer&&r.setAPlayerObserver()},setAPlayerObject:()=>{const e=document.querySelectorAll(".footer meting-js, meting-js");a.player=void 0,e.forEach((e=>{e.meta.id==volantis.GLOBAL_CONFIG.plugins.aplayer.id&&e.aplayer&&!a.player&&(a.player=e.aplayer,r.setAPlayerObserver(),r.updateTitle())}))},setAPlayerObserver:()=>{try{a.player.on("play",(()=>{r.updateAPlayerControllerStatus(),a.status="play"})),a.player.on("pause",(()=>{r.updateAPlayerControllerStatus(),a.status="pause"})),a.player.on("volumechange",r.onUpdateAPlayerVolume),a.player.on("loadstart",r.updateTitle),a.volumeBarWrap=document.querySelector(".nav.volume").children[0],a.volumeBar=a.volumeBarWrap.children[0];const e=e=>r.updateAPlayerVolume(e),l=t=>{a.volumeBarWrap.classList.remove("aplayer-volume-bar-wrap-active"),document.removeEventListener("mouseup",l),document.removeEventListener("mousemove",e),r.updateAPlayerVolume(t)};a.volumeBarWrap.addEventListener("mousedown",(r=>{r.stopPropagation(),a.volumeBarWrap.classList.add("aplayer-volume-bar-wrap-active"),document.addEventListener("mousemove",e),document.addEventListener("mouseup",l)})),a.volumeBarWrap.addEventListener("click",(e=>e.stopPropagation())),r.updateAPlayerControllerStatus(),r.onUpdateAPlayerVolume(),a.observer=!0}catch(e){console.error(e),a.observer=void 0}},updateAPlayerVolume:e=>{let r=(e.clientX-a.volumeBar.getBoundingClientRect().left)/a.volumeBar.clientWidth;r=Math.max(0,Math.min(1,r)),a.player.volume(r)},onUpdateAPlayerVolume:()=>{try{a.volumeBar.children[0].style.width=100*a.player.audio.volume+"%"}catch(e){console.error(e)}},updateAPlayerControllerStatus:()=>{try{const r=document.querySelector(".nav.toggle").children[0];a.player.audio.paused?(e="pause",a.status="pause",r.classList.add("fa-play"),r.classList.remove("fa-pause")):(e="play",a.status="play",r.classList.remove("fa-play"),r.classList.add("fa-pause"))}catch(e){console.error(e)}},aplayerToggle:()=>{r.checkAPlayer(),a.player?.toggle()},aplayerBackward:()=>{r.checkAPlayer(),a.player?.skipBack(),a.player?.play()},aplayerForward:()=>{r.checkAPlayer(),a.player?.skipForward(),a.player?.play()},aplayerVolume:e=>{r.checkAPlayer(),a.player?.volume(e)},updateTitle:()=>{r.checkAPlayer();try{const{index:e,audios:r}=a.player.list;document.querySelector(".nav.music-title").innerHTML=r[e].title}catch(e){console.error(e)}}};return{checkAPlayer:r.checkAPlayer,aplayerBackward:r.aplayerBackward,aplayerToggle:r.aplayerToggle,aplayerForward:r.aplayerForward,aplayerVolume:r.aplayerVolume,APlayer:a}})();Object.freeze(RightMenuAplayer),volantis.requestAnimationFrame((()=>{RightMenuAplayer.checkAPlayer()}));